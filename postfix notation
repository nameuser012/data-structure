#include <stdio.h>
#pragma warning(disable:4996)
#include <string.h>
#include <stdlib.h>
#define FULL 100

typedef struct Stack {
    char arr[100];
    int top;
}Stk;

void init(Stk *s) {
    s->top = -1;
}

int is_full(Stk* s) {
    if (s->top == FULL - 1)
        return 1;
    return 0;
}

int is_empty(Stk* s) {
    if (s->top == - 1)
        return 1;
    return 0;
}

void push(Stk* s, char N) {
    if (is_full(s)) {
        printf("Stack is FULL");
        exit(1);
    }
    s->arr[++(s->top)] = N;
}

char pop(Stk* s) {
    if (is_empty(s)) {
        printf("Stack is empty");
        exit(1);
    }
    return s->arr[s->top--];
}

char peek(Stk* s) {
    if (is_empty(s)) {
        printf("Stack is empty");
        exit(1);
    }
    return s->arr[s->top];
}

int is_first(char c) {
    if (c == '(')
        return 0;
    else if (c == '*' || c == '/')
        return 2;
    else if (c == '+' || c == '-')
        return 1;
    return -1;
}

void postfix(Stk* s) {
    char c;
    scanf("%c", &c);
    while (c != '\n') {
        if (c >= 'A' && c <= 'Z')
            printf("%c", c);
        else {
            if (is_empty(s) || s->arr[s->top] == '(' || c == '(')
                push(s, c);
            else if (c == ')') {
                while (s->arr[s->top] != '(') {
                    printf("%c", pop(s));
                }
                pop(s);
            }
            else {
                while (is_first(s->arr[s->top]) >= is_first(c)) {
                    printf("%c", pop(s));
                }
                push(s, c);
            }
        }
        scanf("%c", &c);
    }
    while (s->top != -1)
        printf("%c", pop(s));    
}

int main() {
    Stk s;
    init(&s);
    postfix(&s);
    return 0;
}
